# ?? REFERENCIA RÁPIDA VISUAL - DÍA DEL EXAMEN

## ?? ANTES DE EMPEZAR
```
? Azure SQL Database funcionando
? Azure Web App funcionando  
? GitHub conectado con Azure
? appsettings.json configurado
? Swagger funciona en Azure
```

---

## ?? FLUJO DE TRABAJO - 45 MINUTOS

```
???????????????????????????????????????????????????????????
? 1. LEE EL EXAMEN (5 min)                               ?
?    - Identifica la entidad (Ej: Producto)              ?
?    - Anota propiedades requeridas                      ?
?    - Busca validaciones especiales                     ?
???????????????????????????????????????????????????????????
                        ?
???????????????????????????????????????????????????????????
? 2. EDITA EL MODELO (5 min)                            ?
?    Models/Item.cs ? Models/Producto.cs                 ?
?                                                         ?
?    public class Producto {                             ?
?        public int Id { get; set; }                     ?
?        public string Nombre { get; set; }              ?
?        public decimal Precio { get; set; }             ?
?        public int Stock { get; set; }                  ?
?    }                                                   ?
???????????????????????????????????????????????????????????
                        ?
???????????????????????????????????????????????????????????
? 3. ACTUALIZA DbContext (2 min)                        ?
?    Data/ApplicationDbContext.cs                        ?
?                                                         ?
?    public DbSet<Producto> Productos { get; set; }     ?
???????????????????????????????????????????????????????????
                        ?
???????????????????????????????????????????????????????????
? 4. ACTUALIZA CONTROLADOR (5 min)                      ?
?    Controllers/ItemsController.cs ?                    ?
?    Controllers/ProductosController.cs                  ?
?                                                         ?
?    - Renombra clase: ProductosController              ?
?    - Cambia Item ? Producto (todas las referencias)   ?
?    - Cambia _context.Items ? _context.Productos       ?
???????????????????????????????????????????????????????????
                        ?
???????????????????????????????????????????????????????????
? 5. MIGRACIÓN (3 min)                                  ?
?    Terminal en Visual Studio:                          ?
?                                                         ?
?    dotnet ef migrations add CrearProductos            ?
?    dotnet ef database update                          ?
???????????????????????????????????????????????????????????
                        ?
???????????????????????????????????????????????????????????
? 6. PRUEBA LOCAL (5 min)                               ?
?    - Presiona F5                                       ?
?    - Se abre Swagger                                   ?
?    - Prueba GET, POST, PUT, DELETE                    ?
?    - Verifica que no haya errores                     ?
???????????????????????????????????????????????????????????
                        ?
???????????????????????????????????????????????????????????
? 7. SUBE A GITHUB (2 min)                              ?
?    Terminal:                                           ?
?                                                         ?
?    git add .                                           ?
?    git commit -m "Implementar API Productos"          ?
?    git push                                            ?
???????????????????????????????????????????????????????????
                        ?
???????????????????????????????????????????????????????????
? 8. DEPLOYMENT AUTOMÁTICO (3 min)                      ?
?    - Ve a GitHub ? Actions                            ?
?    - Espera el check verde ?                         ?
?    - Toma café ?                                      ?
???????????????????????????????????????????????????????????
                        ?
???????????????????????????????????????????????????????????
? 9. VERIFICA EN AZURE (5 min)                          ?
?    https://api-examen-[TU].azurewebsites.net/swagger  ?
?                                                         ?
?    - Prueba GET ? POST ? GET ? PUT ? DELETE          ?
?    - Verifica que persistan los datos                 ?
?    - Captura pantalla (opcional)                      ?
???????????????????????????????????????????????????????????
                        ?
???????????????????????????????????????????????????????????
? 10. ENTREGA (5 min)                                   ?
?     Proporciona al profesor:                           ?
?     ? URL Swagger: https://...azurewebsites.net/...  ?
?     ? URL GitHub: https://github.com/.../...         ?
?     ? Video/fotos (si lo piden)                       ?
???????????????????????????????????????????????????????????
```

---

## ?? PLANTILLA DE CÓDIGO - COPIAR Y PEGAR

### Modelo básico con validaciones
```csharp
using System.ComponentModel.DataAnnotations;

namespace API_EXAMEN_FINAL.Models
{
    public class Producto
    {
        public int Id { get; set; }

        [Required(ErrorMessage = "El nombre es obligatorio")]
        [StringLength(100)]
        public string Nombre { get; set; } = string.Empty;

        [StringLength(500)]
        public string Descripcion { get; set; } = string.Empty;

        [Required]
        [Range(0.01, 999999.99)]
        public decimal Precio { get; set; }

        [Range(0, int.MaxValue)]
        public int Stock { get; set; }

        public DateTime FechaCreacion { get; set; } = DateTime.Now;

        public bool Activo { get; set; } = true;
    }
}
```

### DbContext
```csharp
// En Data/ApplicationDbContext.cs
public DbSet<Producto> Productos { get; set; }
```

### Estructura básica del controlador
```csharp
[Route("api/[controller]")]
[ApiController]
public class ProductosController : ControllerBase
{
    private readonly ApplicationDbContext _context;

    public ProductosController(ApplicationDbContext context)
    {
        _context = context;
    }

    // GET: api/Productos
    [HttpGet]
    public async Task<ActionResult<IEnumerable<Producto>>> GetProductos()
    {
        return await _context.Productos.ToListAsync();
    }

    // GET: api/Productos/5
    [HttpGet("{id}")]
    public async Task<ActionResult<Producto>> GetProducto(int id)
    {
        var producto = await _context.Productos.FindAsync(id);
        if (producto == null) return NotFound();
        return producto;
    }

    // POST: api/Productos
    [HttpPost]
    public async Task<ActionResult<Producto>> PostProducto(Producto producto)
    {
        _context.Productos.Add(producto);
        await _context.SaveChangesAsync();
        return CreatedAtAction(nameof(GetProducto), new { id = producto.Id }, producto);
    }

    // PUT: api/Productos/5
    [HttpPut("{id}")]
    public async Task<IActionResult> PutProducto(int id, Producto producto)
    {
        if (id != producto.Id) return BadRequest();
        _context.Entry(producto).State = EntityState.Modified;
        
        try {
            await _context.SaveChangesAsync();
        }
        catch (DbUpdateConcurrencyException) {
            if (!_context.Productos.Any(e => e.Id == id))
                return NotFound();
            throw;
        }
        return NoContent();
    }

    // DELETE: api/Productos/5
    [HttpDelete("{id}")]
    public async Task<IActionResult> DeleteProducto(int id)
    {
        var producto = await _context.Productos.FindAsync(id);
        if (producto == null) return NotFound();
        
        _context.Productos.Remove(producto);
        await _context.SaveChangesAsync();
        return NoContent();
    }
}
```

---

## ?? COMANDOS ESENCIALES

### Compilar y probar
```bash
dotnet build              # Compilar
dotnet run                # Ejecutar (o F5 en VS)
```

### Migraciones
```bash
dotnet ef migrations add [Nombre]     # Crear migración
dotnet ef database update             # Aplicar a BD
dotnet ef migrations list             # Ver migraciones
dotnet ef migrations remove           # Eliminar última
```

### Git
```bash
git status                            # Ver cambios
git add .                             # Agregar todo
git commit -m "mensaje"               # Confirmar
git push                              # Subir
```

### Script automático (PowerShell)
```powershell
.\deploy-examen.ps1 -NombreEntidad "Producto"
```

---

## ?? ATAJOS DE TECLADO EN VISUAL STUDIO

| Acción | Atajo |
|--------|-------|
| Compilar | `Ctrl + Shift + B` |
| Ejecutar | `F5` |
| Detener | `Shift + F5` |
| Buscar | `Ctrl + F` |
| Buscar en archivos | `Ctrl + Shift + F` |
| Renombrar símbolo | `Ctrl + R, R` |
| Formato de código | `Ctrl + K, D` |
| Terminal | `Ctrl + ñ` o View ? Terminal |
| Intellisense | `Ctrl + Space` |
| Quick Actions | `Ctrl + .` |

---

## ?? RESPUESTAS HTTP CORRECTAS

| Método | Caso | Código | Respuesta |
|--------|------|--------|-----------|
| GET | Lista encontrada | 200 OK | Array de objetos |
| GET | Lista vacía | 200 OK | `[]` |
| GET | Por ID encontrado | 200 OK | Objeto |
| GET | Por ID no encontrado | 404 Not Found | null o mensaje |
| POST | Creado exitosamente | 201 Created | Objeto creado + Location header |
| POST | Datos inválidos | 400 Bad Request | Errores de validación |
| PUT | Actualizado | 204 No Content | Sin cuerpo |
| PUT | No encontrado | 404 Not Found | null o mensaje |
| PUT | ID no coincide | 400 Bad Request | Mensaje |
| DELETE | Eliminado | 204 No Content | Sin cuerpo |
| DELETE | No encontrado | 404 Not Found | null o mensaje |

---

## ?? PROPIEDADES COMUNES POR TIPO DE ENTIDAD

### Producto / Artículo
```csharp
int Id
string Nombre
string Descripcion
decimal Precio
int Stock / Cantidad
string Categoria
bool Disponible / Activo
DateTime FechaCreacion
```

### Cliente / Usuario
```csharp
int Id
string Nombre / NombreCompleto
string Email
string Telefono
string Direccion
DateTime FechaRegistro
bool Activo
```

### Pedido / Orden
```csharp
int Id
int ClienteId
DateTime FechaPedido
decimal Total
string Estado (Pendiente/Enviado/Entregado)
string DireccionEnvio
```

### Libro / Recurso
```csharp
int Id
string Titulo
string Autor
string ISBN
int AñoPublicacion
string Editorial
int Paginas
bool Disponible
```

---

## ? TROUBLESHOOTING RÁPIDO

| Problema | Solución Rápida |
|----------|-----------------|
| Error de compilación | `dotnet clean` ? `dotnet build` |
| Error de migración | Verifica cadena de conexión y firewall Azure |
| Error en push | `git pull --rebase` ? `git push` |
| Swagger no aparece | Verifica `Program.cs` - debe estar sin `if(Development)` |
| Error 500 en Azure | Ve a Azure Portal ? Log Stream |
| Deployment falla | Revisa GitHub Actions logs |

---

## ?? CONTACTOS Y URLS

### URLs a tener abiertas
```
? Azure Portal: https://portal.azure.com
? GitHub Repo: https://github.com/[USER]/api-examen-final
? GitHub Actions: https://github.com/[USER]/api-examen-final/actions
? API Azure: https://api-examen-[NOMBRE].azurewebsites.net/swagger
? Esta guía: REFERENCIA_RAPIDA_VISUAL.md
```

### Tabs recomendadas en el navegador
1. Azure Portal (SQL + Web App)
2. GitHub (Repositorio)
3. GitHub Actions (Ver deployment)
4. Swagger Azure (Pruebas finales)
5. Este documento (Referencia)

---

## ? VALIDACIÓN FINAL

Antes de entregar, verifica:
```
[ ] Compile localmente sin errores
[ ] Todos los endpoints funcionan en local
[ ] Push exitoso a GitHub
[ ] GitHub Actions termina con check verde ?
[ ] Swagger abre en Azure
[ ] GET funciona en Azure
[ ] POST funciona en Azure (crea registro)
[ ] Datos persisten (refresh no los borra)
[ ] URL pública accesible
```

---

**?? IMPRIME ESTA HOJA PARA EL EXAMEN ??**
